webpackJsonp([1],{"/KV2":function(e,n){},"5W1q":function(e,n){},DUiP:function(e,n){},ECfL:function(e,n){},EEbw:function(e,n){e.exports={version:"0.20.5"}},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("7+uW"),s={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"background",attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var o=t("VU/8")({name:"App"},s,!1,function(e){t("DUiP")},null,null).exports,i=t("/ocq"),c=t("bOdI"),r=t.n(c),u=t("NYxO"),p={1:"Main Net",2:"Deprecated Morden test network",3:"Ropsten test network",4:"Rinkeby test network",5:"Goerli test network",42:"Kovan test network",4447:"Truffle Develop Network",5777:"Ganache Blockchain"},m={name:"casino",data:function(){return{amount:null,pending:!1,winEvent:null,sendToAmount:null,sendToAddress:null,sendFromAmount:345e-6,sendFromAddress:null,transactionDone:!1}},computed:Object(u.b)({coinbase:function(e){return e.web3.coinbase},isCheckingTransaction:function(e){return e.web3.isCheckingTransaction},ethBalance:function(e){if(null!==e.web3.web3Instance)return e.web3.web3Instance().fromWei(e.web3.balance,"ether")},network:function(e){return p[e.web3.networkId]},isInjected:function(e){return e.web3.isInjected}}),methods:{clickNumber:function(){var e=this;console.log("Se van a transferir: ",this.sendFromAmount),this.winEvent=null,this.pending=!0,this.$store.state.contractInstance().bet(1,{gas:3e5,value:this.$store.state.web3.web3Instance().toWei(this.sendFromAmount,"ether"),from:this.$store.state.web3.coinbase},function(n,t){n?(console.log(n),e.pending=!1):(e.$store.state.web3.isCheckingTransaction=!0,e.transactionDone=!0,console.log("Empezando a transferir"),e.pending=!1,e.$store.state.contractInstance().Won().watch(function(n,t){n?(e.pending=!1,console.log("could not get event Won()")):(e.pending=!1,console.log("Entro todo bien, hay que modificar"),e.winEvent=t.args,e.winEvent._amount=parseInt(t.args._amount,10))}))})},activateMetaMask:function(){window.ethereum.enable()}},mounted:function(){console.log("dispatching getContractInstance"),this.$store.dispatch("getContractInstance")}},d={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container casino pt-4"},[e._m(0),e._v(" "),"Kovan test network"!=e.network?t("div",[t("div",{staticClass:"column content is-small box m-4 p-6"},[e.isInjected?e._e():t("div",{staticClass:"pb-4"},[t("h2",[e._v("Download and connect MetaMask")]),e._v(" "),t("button",{staticClass:"button is-primary",on:{click:function(n){e.activateMetaMask()}}},[e._v("\n          Connect MetaMask\n        ")])]),e._v(" "),t("h2",{staticClass:"mb-0"},[e._v('Switch to "Kovan Test Network"')])])]):e.isCheckingTransaction||e.transactionDone?!e.isCheckingTransaction&&e.transactionDone?t("div",{staticClass:"columns"},[t("div",{staticClass:"column content is-small box m-4 p-6"},[e._m(1),e._v(" "),t("button",{staticClass:"button is-primary",on:{click:function(n){e.transactionDone=!1}}},[e._v("Go back")])])]):e.isCheckingTransaction&&e.transactionDone?t("div",{staticClass:"columns"},[e._m(2)]):e._e():t("div",{staticClass:"columns"},[t("div",{staticClass:"column content is-small box m-4 p-6"},[t("h2",[e._v("Send from")]),e._v(" "),t("b-field",{staticClass:"pt-2",attrs:{label:"Address"}},[t("b-input",{attrs:{placeholder:"Address",icon:"account",disabled:""},model:{value:e.coinbase,callback:function(n){e.coinbase=n},expression:"coinbase"}})],1),e._v(" "),t("b-field",{staticClass:"pt-2",attrs:{label:"Amount"}},[t("b-input",{attrs:{placeholder:"Amount",icon:"account"},model:{value:e.sendFromAmount,callback:function(n){e.sendFromAmount=e._n(n)},expression:"sendFromAmount"}})],1),e._v(" "),t("p",{staticClass:"mb-5"},[e._v("\n        Current balance: "),t("strong",[e._v(" "+e._s(e.ethBalance)+" ")]),e._v(" ETH\n      ")]),e._v(" "),t("p",{staticClass:"mb-5"},[e._v("\n        Balance after transfer:\n        "),t("strong",[e._v(" "+e._s(e.ethBalance-e.sendFromAmount)+" ")]),e._v(" ETH\n      ")]),e._v(" "),t("button",{class:1!=e.pending?"button is-primary":"button is-primary is-loading",on:{click:e.clickNumber}},[e._v("\n        Transferir con MetaMask\n      ")])],1)])])},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"columns"},[n("div",{staticClass:"column content is-medium"},[n("h1",{staticClass:"white-text"},[this._v("Testing Web3 - MetaMask")]),this._v(" "),n("img",{attrs:{src:"https://alpha.emdx.io/img/logo.png",alt:""}})])])},function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"column"},[n("h2",[this._v("Transaction Successful")])])},function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"column content is-small box m-4 p-6"},[n("div",{staticClass:"column"},[n("h2",[this._v("Checking transaction")]),this._v(" "),n("h3",[this._v("Please wait...")]),this._v(" "),n("img",{attrs:{height:"50",src:"https://mir-s3-cdn-cf.behance.net/project_modules/disp/dae67631234507.564a1d230a290.gif",alt:""}})])])}]};var l={name:"casino-dapp",beforeCreate:function(){console.log("registerWeb3 Action dispatched from casino-dapp.vue"),this.$store.dispatch("registerWeb3")},components:{"casino-component":t("VU/8")(m,d,!1,function(e){t("NYAd")},"data-v-1adb864d",null).exports},methods:{activateMetaMask:function(){window.ethereum.enable()}},computed:Object(u.b)(r()({coinbase:function(e){return e.web3.coinbase},ethBalance:function(e){if(null!==e.web3.web3Instance)return e.web3.web3Instance().fromWei(e.web3.balance,"ether")}},"coinbase",function(e){return e.web3.coinbase}))},b={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",[n("casino-component")],1)},staticRenderFns:[]};var y=t("VU/8")(l,b,!1,function(e){t("ECfL")},"data-v-0bb59163",null).exports;a.a.use(i.a);var f=new i.a({routes:[{path:"/",name:"casino-dapp",component:y}]}),v={web3:{isInjected:!1,web3Instance:null,networkId:null,coinbase:null,balance:null,error:null,isCheckingTransaction:!1},contractInstance:null},w=t("woOf"),h=t.n(w),_=t("//Fk"),g=t.n(_),k=t("8k0n"),C=t.n(k),I=new g.a(function(e,n){var t=window.web3;if(void 0!==t){var a=new C.a(t.currentProvider);e({injectedWeb3:a.isConnected(),web3:function(){return a}})}else n(new Error("Unable to connect to Metamask"))}).then(function(e){return new g.a(function(n,t){e.web3().version.getNetwork(function(a,s){a?t(new Error("Unable to retrieve network ID")):(e=h()({},e,{networkId:s}),n(e))})})}).then(function(e){return new g.a(function(n,t){e.web3().eth.getCoinbase(function(a,s){a?t(new Error("Unable to retrieve coinbase")):(e=h()({},e,{coinbase:s}),n(e))})})}).then(function(e){return new g.a(function(n,t){e.web3().eth.getBalance(e.coinbase,function(a,s){a?t(new Error("Unable to retrieve balance for address: "+e.coinbase)):(e=h()({},e,{balance:s}),n(e))})})}),x=function(e){var n=window.web3;n=new C.a(n.currentProvider),setInterval(function(){if(n&&A.state.web3.web3Instance)if(n.eth.coinbase!==A.state.web3.coinbase){var e=n.eth.coinbase;n.eth.getBalance(n.eth.coinbase,function(n,t){n?console.log(n):A.dispatch("pollWeb3",{coinbase:e,balance:parseInt(t,10)})})}else n.eth.getBalance(A.state.web3.coinbase,function(e,n){e?console.log(e):parseInt(n,10)!==A.state.web3.balance&&A.dispatch("pollWeb3",{coinbase:A.state.web3.coinbase,balance:n})})},500)},E=[{constant:!1,inputs:[{name:"_number",type:"uint256"}],name:"bet",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"houseEdge",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_houseEdge",type:"uint256"}],payable:!0,stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_status",type:"bool"},{indexed:!1,name:"_amount",type:"uint256"}],name:"Won",type:"event"}],W=new g.a(function(e,n){var t=new C.a(window.web3.currentProvider).eth.contract(E),a=t.at("0x4A8Ecd73515c7D475f67977c9bC8f0afc6cEB1E1");console.log(t),console.log(a),e(a)});a.a.use(u.a);var A=new u.a.Store({strict:!0,state:v,mutations:{registerWeb3Instance:function(e,n){console.log("registerWeb3instance Mutation being executed",n);var t=n,a=e.web3;a.coinbase=t.coinbase,a.networkId=t.networkId,a.balance=parseInt(t.balance,10),a.isInjected=t.injectedWeb3,a.web3Instance=t.web3,e.web3=a,x()},pollWeb3Instance:function(e,n){console.log("pollWeb3Instance mutation being executed",n),e.web3.isCheckingTransaction=!1,e.web3.coinbase=n.coinbase,e.web3.balance=parseInt(n.balance,10)},registerContractInstance:function(e,n){console.log("Casino contract instance: ",n),e.contractInstance=function(){return n}}},actions:{registerWeb3:function(e){var n=e.commit;console.log("registerWeb3 Action being executed"),I.then(function(e){console.log("committing result to registerWeb3Instance mutation"),n("registerWeb3Instance",e)}).catch(function(e){console.log("error in action registerWeb3",e)})},pollWeb3:function(e,n){var t=e.commit;console.log("pollWeb3 action being executed"),t("pollWeb3Instance",n)},getContractInstance:function(e){var n=e.commit;W.then(function(e){n("registerContractInstance",e)}).catch(function(e){return console.log(e)})}}}),M=(t("5W1q"),t("k5jX"));t("/KV2");a.a.use(M.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:f,store:A,components:{App:o},template:"<App/>"})},NYAd:function(e,n){},"R/pS":function(e,n){e.exports=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"name",outputs:[{name:"o_name",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"subRegistrar",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_registrar",type:"address"}],name:"setSubRegistrar",outputs:[],type:"function"},{constant:!1,inputs:[],name:"Registrar",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"},{name:"_primary",type:"bool"}],name:"setAddress",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_content",type:"bytes32"}],name:"setContent",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"disown",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_winner",type:"address"}],name:"AuctionEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_bidder",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"NewBid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"},{indexed:!0,name:"addr",type:"address"}],name:"PrimaryChanged",type:"event"}]},UIsv:function(e,n){e.exports=[{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_refund",type:"address"}],name:"disown",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"}],name:"setAddr",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"}]},oPsS:function(e,n){e.exports=[{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"indirectId",type:"bytes32"},{name:"value",type:"uint256"}],name:"icapTransfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"to",type:"bytes32"}],name:"deposit",outputs:[],payable:!0,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"AnonymousDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"indirectId",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"IcapTransfer",type:"event"}]}},["NHnr"]);
//# sourceMappingURL=app.10549d5221fae156c1d3.js.map