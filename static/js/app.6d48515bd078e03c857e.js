webpackJsonp([1],{"/KV2":function(e,n){},"5W1q":function(e,n){},AgVF:function(e,n){},DUiP:function(e,n){},EEbw:function(e,n){e.exports={version:"0.20.5"}},J4a1:function(e,n){},NHnr:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=t("7+uW"),s={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"background",attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var o=t("VU/8")({name:"App"},s,!1,function(e){t("DUiP")},null,null).exports,i=t("/ocq"),c={1:"Main Net",2:"Deprecated Morden test network",3:"Ropsten test network",4:"Rinkeby test network",5:"Goerli test network",42:"Kovan test network",4447:"Truffle Develop Network",5777:"Ganache Blockchain"},r=t("NYxO"),u={data:function(){return{showMetaMaskData:!1}},name:"hello-metamask",computed:Object(r.b)({isInjected:function(e){return e.web3.isInjected},network:function(e){return c[e.web3.networkId]},coinbase:function(e){return e.web3.coinbase},balance:function(e){return e.web3.balance},ethBalance:function(e){if(null!==e.web3.web3Instance)return e.web3.web3Instance().fromWei(e.web3.balance,"ether")}})},p={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.showMetaMaskData?t("div",{staticClass:"metamask-info white-text"},[e.isInjected?t("p",{attrs:{id:"has-metamask"}},[t("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),e._v(" Metamask installed")]):t("p",{attrs:{id:"no-metamask"}},[t("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}}),e._v(" Metamask not found")]),e._v(" "),t("p",[e._v("Network: "+e._s(e.network))]),e._v(" "),t("p",[e._v("Account: "+e._s(e.coinbase))])]):e._e()},staticRenderFns:[]};var d=t("VU/8")(u,p,!1,function(e){t("X/cV")},"data-v-446da0a4",null).exports,m=t("bOdI"),l=t.n(m),b={name:"casino",data:function(){return{amount:null,pending:!1,winEvent:null,sendToAmount:null,sendToAddress:null,sendFromAmount:345e-6,sendFromAddress:null}},computed:Object(r.b)(l()({coinbase:function(e){return e.web3.coinbase},ethBalance:function(e){if(null!==e.web3.web3Instance)return e.web3.web3Instance().fromWei(e.web3.balance,"ether")}},"coinbase",function(e){return e.web3.coinbase})),methods:{clickNumber:function(){var e=this;console.log("Transfiriendo: ",this.sendFromAmount),this.winEvent=null,this.pending=!0,this.$store.state.contractInstance().bet(1,{gas:3e5,value:this.$store.state.web3.web3Instance().toWei(this.sendFromAmount,"ether"),from:this.$store.state.web3.coinbase},function(n,t){n?(console.log(n),e.pending=!1):e.$store.state.contractInstance().Won().watch(function(n,t){n?(e.pending=!1,console.log("could not get event Won()")):(e.pending=!1,console.log("Entro todo bien, hay que modificar"),e.winEvent=t.args,e.winEvent._amount=parseInt(t.args._amount,10),e.pending=!1)})})}},mounted:function(){console.log("dispatching getContractInstance"),this.$store.dispatch("getContractInstance")}},y={render:function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"container casino pt-4"},[e._m(0),e._v(" "),t("div",{staticClass:"columns"},[t("div",{staticClass:"column content is-small box m-4"},[t("h2",[e._v("Send from")]),e._v(" "),t("b-field",{staticClass:"pt-2",attrs:{label:"Address"}},[t("b-input",{attrs:{placeholder:"Address",icon:"account",disabled:""},model:{value:e.coinbase,callback:function(n){e.coinbase=n},expression:"coinbase"}})],1),e._v(" "),t("b-field",{staticClass:"pt-2",attrs:{label:"Amount"}},[t("b-input",{attrs:{placeholder:"Amount",icon:"account"},model:{value:e.sendFromAmount,callback:function(n){e.sendFromAmount=e._n(n)},expression:"sendFromAmount"}})],1),e._v(" "),t("p",[e._v("ETH Balance: "+e._s(e.ethBalance)+" ETH")])],1)]),e._v(" "),t("button",{class:1!=e.pending?"button is-primary":"button is-primary is-loading",on:{click:e.clickNumber}},[e._v("Transferir con MetaMask")]),e._v(" "),e.winEvent?t("div",{staticClass:"event"},[e.winEvent._status?t("p",{attrs:{id:"has-won"}},[t("i",{staticClass:"fa fa-check",attrs:{"aria-hidden":"true"}}),e._v(" Congragulations, you have\n        won "+e._s(e.winEvent._amount)+" wei\n      ")]):t("p",{attrs:{id:"has-lost"}},[t("i",{staticClass:"fa fa-times",attrs:{"aria-hidden":"true"}}),e._v(" Sorry you lost, try\n        again.\n      ")])]):e._e()])},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"columns"},[n("div",{staticClass:"column content is-medium"},[n("h1",{staticClass:"white-text"},[this._v("Testing Web3 - MetaMask")]),this._v(" "),n("img",{attrs:{src:"https://alpha.emdx.io/img/logo.png",alt:""}})])])}]};var f={name:"casino-dapp",beforeCreate:function(){console.log("registerWeb3 Action dispatched from casino-dapp.vue"),this.$store.dispatch("registerWeb3")},components:{"hello-metamask":d,"casino-component":t("VU/8")(b,y,!1,function(e){t("AgVF")},"data-v-9d408270",null).exports}},w={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",[n("casino-component"),this._v(" "),n("hello-metamask")],1)},staticRenderFns:[]};var v=t("VU/8")(f,w,!1,function(e){t("J4a1")},"data-v-e9ceface",null).exports;a.a.use(i.a);var h=new i.a({routes:[{path:"/",name:"casino-dapp",component:v}]}),_={web3:{isInjected:!1,web3Instance:null,networkId:null,coinbase:null,balance:null,error:null},contractInstance:null},g=t("woOf"),I=t.n(g),k=t("//Fk"),x=t.n(k),C=t("8k0n"),W=t.n(C),E=new x.a(function(e,n){var t=window.web3;if(void 0!==t){var a=new W.a(t.currentProvider);e({injectedWeb3:a.isConnected(),web3:function(){return a}})}else n(new Error("Unable to connect to Metamask"))}).then(function(e){return new x.a(function(n,t){e.web3().version.getNetwork(function(a,s){a?t(new Error("Unable to retrieve network ID")):(e=I()({},e,{networkId:s}),n(e))})})}).then(function(e){return new x.a(function(n,t){e.web3().eth.getCoinbase(function(a,s){a?t(new Error("Unable to retrieve coinbase")):(e=I()({},e,{coinbase:s}),n(e))})})}).then(function(e){return new x.a(function(n,t){e.web3().eth.getBalance(e.coinbase,function(a,s){a?t(new Error("Unable to retrieve balance for address: "+e.coinbase)):(e=I()({},e,{balance:s}),n(e))})})}),A=function(e){var n=window.web3;n=new W.a(n.currentProvider),setInterval(function(){if(n&&T.state.web3.web3Instance)if(n.eth.coinbase!==T.state.web3.coinbase){var e=n.eth.coinbase;n.eth.getBalance(n.eth.coinbase,function(n,t){n?console.log(n):T.dispatch("pollWeb3",{coinbase:e,balance:parseInt(t,10)})})}else n.eth.getBalance(T.state.web3.coinbase,function(e,n){e?console.log(e):parseInt(n,10)!==T.state.web3.balance&&T.dispatch("pollWeb3",{coinbase:T.state.web3.coinbase,balance:n})})},500)},M=[{constant:!1,inputs:[{name:"_number",type:"uint256"}],name:"bet",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"houseEdge",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_houseEdge",type:"uint256"}],payable:!0,stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_status",type:"bool"},{indexed:!1,name:"_amount",type:"uint256"}],name:"Won",type:"event"}],F=new x.a(function(e,n){var t=new W.a(window.web3.currentProvider).eth.contract(M),a=t.at("0x4A8Ecd73515c7D475f67977c9bC8f0afc6cEB1E1");console.log(t),console.log(a),e(a)});a.a.use(r.a);var T=new r.a.Store({strict:!0,state:_,mutations:{registerWeb3Instance:function(e,n){console.log("registerWeb3instance Mutation being executed",n);var t=n,a=e.web3;a.coinbase=t.coinbase,a.networkId=t.networkId,a.balance=parseInt(t.balance,10),a.isInjected=t.injectedWeb3,a.web3Instance=t.web3,e.web3=a,A()},pollWeb3Instance:function(e,n){console.log("pollWeb3Instance mutation being executed",n),e.web3.coinbase=n.coinbase,e.web3.balance=parseInt(n.balance,10)},registerContractInstance:function(e,n){console.log("Casino contract instance: ",n),e.contractInstance=function(){return n}}},actions:{registerWeb3:function(e){var n=e.commit;console.log("registerWeb3 Action being executed"),E.then(function(e){console.log("committing result to registerWeb3Instance mutation"),n("registerWeb3Instance",e)}).catch(function(e){console.log("error in action registerWeb3",e)})},pollWeb3:function(e,n){var t=e.commit;console.log("pollWeb3 action being executed"),t("pollWeb3Instance",n)},getContractInstance:function(e){var n=e.commit;F.then(function(e){n("registerContractInstance",e)}).catch(function(e){return console.log(e)})}}}),j=(t("5W1q"),t("k5jX"));t("/KV2");a.a.use(j.a),a.a.config.productionTip=!1,new a.a({el:"#app",router:h,store:T,components:{App:o},template:"<App/>"})},"R/pS":function(e,n){e.exports=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"name",outputs:[{name:"o_name",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"subRegistrar",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_registrar",type:"address"}],name:"setSubRegistrar",outputs:[],type:"function"},{constant:!1,inputs:[],name:"Registrar",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"},{name:"_primary",type:"bool"}],name:"setAddress",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_content",type:"bytes32"}],name:"setContent",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"disown",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_winner",type:"address"}],name:"AuctionEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_bidder",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"NewBid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"},{indexed:!0,name:"addr",type:"address"}],name:"PrimaryChanged",type:"event"}]},UIsv:function(e,n){e.exports=[{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_refund",type:"address"}],name:"disown",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"}],name:"setAddr",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"}]},"X/cV":function(e,n){},oPsS:function(e,n){e.exports=[{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"indirectId",type:"bytes32"},{name:"value",type:"uint256"}],name:"icapTransfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"to",type:"bytes32"}],name:"deposit",outputs:[],payable:!0,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"AnonymousDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"indirectId",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"IcapTransfer",type:"event"}]}},["NHnr"]);
//# sourceMappingURL=app.6d48515bd078e03c857e.js.map