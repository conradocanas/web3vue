webpackJsonp([1],{"6lWW":function(e,t){},"7zck":function(e,t){},DUiP:function(e,t){},EEbw:function(e,t){e.exports={version:"0.20.5"}},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("7+uW"),s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"background",attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},s,!1,function(e){n("DUiP")},null,null).exports,i=n("/ocq"),r=n("bOdI"),c=n.n(r),u=n("NYxO"),d=n("//Fk"),l=n.n(d),p={1:"Main Net",2:"Deprecated Morden test network",3:"Ropsten test network",4:"Rinkeby test network",5:"Goerli test network",42:"Kovan test network",4447:"Truffle Develop Network",5777:"Ganache Blockchain"},m=[{constant:!1,inputs:[{name:"_number",type:"uint256"}],name:"bet",outputs:[],payable:!0,stateMutability:"payable",type:"function"},{constant:!0,inputs:[],name:"houseEdge",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"_houseEdge",type:"uint256"}],payable:!0,stateMutability:"payable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"_status",type:"bool"},{indexed:!1,name:"_amount",type:"uint256"}],name:"Won",type:"event"}],b={name:"casino",data:function(){return{amount:null,pending:!1,winEvent:null,sendToAmount:null,sendToAddress:null,sendFromAmount:345e-6,sendFromAddress:null,transactionDone:!1,showMore:!1,loadingTable:!1,transactionDialog:!1,headers:[{text:"Date",value:"timeStamp"},{text:"Block NÂ°",align:"start",sortable:!1,value:"blockNumber"},{text:"From",value:"from"},{text:"To",value:"to"},{text:"Value",value:"value"},{text:"Gas",value:"gas"}],desserts:[]}},computed:Object(u.b)({coinbase:function(e){return e.web3.coinbase},isCheckingTransaction:function(e){return e.web3.isCheckingTransaction},ethBalance:function(e){if(null!==e.web3.web3Instance)return e.web3.web3Instance().fromWei(e.web3.balance,"ether")},network:function(e){return p[e.web3.networkId]},isInjected:function(e){return e.web3.isInjected},latestTransactions:function(e){return e.web3.latestTransactions}}),methods:{activateMetaMask:function(){window.ethereum.enable()},weiToEth:function(e){return this.$store.state.web3.toWei(e,"eth")},transfer:function(){var e=this,t=this.sendToAddress;new l.a(function(e,n){var a=new Web3(window.web3.currentProvider).eth.contract(m),s=a.at(t);console.log(a),console.log(s),e(s)}).then(function(t){e.$store.commit("registerContractInstance",t),e.$store.state.contractInstance().bet(1,{gas:3e5,value:e.$store.state.web3.web3Instance().toWei(e.sendFromAmount,"ether"),from:e.$store.state.web3.coinbase},function(t,n){t?(console.log(t),e.pending=!1):(e.$store.state.web3.isCheckingTransaction=!0,e.transactionDone=!0,e.transactionDialog=!0,console.log("Empezando a transferir"),e.pending=!1,e.$store.state.contractInstance().Won().watch(function(t,n){t?(e.pending=!1,console.log("could not get event Won()")):(e.pending=!1,console.log("Entro todo bien, hay que modificar"),e.winEvent=n.args,e.winEvent._amount=parseInt(n.args._amount,10))}))})}).catch(function(e){return console.log(e)})}},mounted:function(){}},y={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",[n("v-row",{staticClass:"pa-4"},[n("img",{attrs:{src:"https://alpha.emdx.io/img/logo.png",alt:""}})]),e._v(" "),n("v-row",{staticClass:"pt-6"},[n("v-col",{attrs:{lg:"4"}},[n("v-card",{staticClass:"primaryBack mb-4 pa-4"},[n("v-card-title",{staticClass:"white--text"},[e._v("Account")]),e._v(" "),e.isInjected?n("v-card-subtitle",[n("p",{staticClass:"white--text"},[e._v(e._s(e.coinbase))]),e._v(" "),n("p",{staticClass:"white--text"},[e._v("Network: "+e._s(e.network))]),e._v(" "),n("p",{staticClass:"white--text"},[e._v("Balance: "),n("strong",{staticClass:"white--text"},[e._v(e._s(e.ethBalance))]),e._v(" ETH")])]):n("v-card-subtitle",[n("v-btn",{on:{click:function(t){return e.activateMetaMask()}}},[n("v-icon",[e._v("mdi-metamask")]),e._v("Connect to MetaMask")],1)],1)],1),e._v(" "),"Kovan test network"!=e.network?n("v-card",{staticClass:"primaryBack pa-4",attrs:{height:"200"}},[n("v-card-title",{staticClass:"white--text text-center"},[e._v("Transfer")]),e._v(" "),n("v-card-text",{staticClass:"white--text text-center"},[e._v("Switch to Kovan Network to transfer")])],1):n("v-card",{staticClass:"primaryBack pa-4"},[n("v-card-title",{staticClass:"white--text"},[e._v("Transfer")]),e._v(" "),n("v-card-text",[n("v-text-field",{attrs:{label:"Send from:",readonly:""},model:{value:e.coinbase,callback:function(t){e.coinbase=t},expression:"coinbase"}}),e._v(" "),n("v-text-field",{attrs:{label:"Quantity:"},model:{value:e.sendFromAmount,callback:function(t){e.sendFromAmount=t},expression:"sendFromAmount"}}),e._v(" "),n("v-text-field",{attrs:{value:"John Doe",label:"Send to:"},model:{value:e.sendToAddress,callback:function(t){e.sendToAddress=t},expression:"sendToAddress"}}),e._v(" "),n("v-btn",{staticClass:"primary",attrs:{loading:e.pending,block:""},on:{click:function(t){return e.transfer()}}},[n("v-icon",[e._v("mdi-send")]),e._v("\n                Transfer\n              ")],1)],1)],1)],1),e._v(" "),n("v-col",{attrs:{lg:"8"}},[n("v-card",{staticClass:"primaryBack"},[n("v-card-title",{staticClass:"white--text"},[e._v("Latest Transactions")]),e._v(" "),n("v-data-table",{staticClass:"elevation-0 primaryBack",attrs:{headers:e.headers,items:e.latestTransactions,"items-per-page":5,loading:e.loadingTable,"hide-default-footer":!0}})],1)],1)],1)],1),e._v(" "),n("v-dialog",{attrs:{width:"500"},model:{value:e.transactionDialog,callback:function(t){e.transactionDialog=t},expression:"transactionDialog"}},[!e.isCheckingTransaction&&e.transactionDone?n("v-card",{staticClass:"secondaryBack text-center pa-8"},[n("h1",{staticClass:"white--text"},[e._v("Transaction Successful!")]),e._v(" "),n("v-icon",{attrs:{color:"success"}},[e._v("mdi-checkbox-marked-circle-outline")]),e._v(" "),n("v-btn",{staticClass:"primary mt-4",on:{click:function(t){e.transactionDialog=!1}}},[e._v("Go back")])],1):e.isCheckingTransaction&&e.transactionDone?n("v-card",{staticClass:"secondaryBack text-center pa-8"},[n("h1",{staticClass:"white--text"},[e._v("Checking transaction")]),e._v(" "),n("v-progress-circular",{staticClass:"mt-2",attrs:{size:50,color:"primary",indeterminate:""}})],1):e._e()],1)],1)},staticRenderFns:[]};var f={name:"casino-dapp",beforeCreate:function(){console.log("registerWeb3 Action dispatched from casino-dapp.vue"),this.$store.dispatch("registerWeb3")},components:{"casino-component":n("VU/8")(b,y,!1,function(e){n("6lWW")},"data-v-67806262",null).exports},methods:{activateMetaMask:function(){window.ethereum.enable()}},computed:Object(u.b)(c()({coinbase:function(e){return e.web3.coinbase},ethBalance:function(e){if(null!==e.web3.web3Instance)return e.web3.web3Instance().fromWei(e.web3.balance,"ether")}},"coinbase",function(e){return e.web3.coinbase}))},v={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",[t("div",{staticClass:"background"},[t("casino-component")],1)])},staticRenderFns:[]};var w=n("VU/8")(f,v,!1,function(e){n("hvTE")},"data-v-a6a6318e",null).exports;a.default.use(i.a);var g=new i.a({routes:[{path:"/",name:"casino-dapp",component:w}]}),h={web3:{isInjected:!1,web3Instance:null,networkId:null,coinbase:null,balance:null,error:null,isCheckingTransaction:!1,latestTransactions:[]},contractInstance:null},_=n("woOf"),k=n.n(_),x=n("8k0n"),C=n.n(x),I=new l.a(function(e,t){var n=window.web3;if(void 0!==n){var a=new C.a(n.currentProvider);e({injectedWeb3:a.isConnected(),web3:function(){return a}})}else t(new Error("Unable to connect to Metamask"))}).then(function(e){return new l.a(function(t,n){e.web3().version.getNetwork(function(a,s){a?n(new Error("Unable to retrieve network ID")):(e=k()({},e,{networkId:s}),t(e))})})}).then(function(e){return new l.a(function(t,n){e.web3().eth.getCoinbase(function(a,s){a?n(new Error("Unable to retrieve coinbase")):(e=k()({},e,{coinbase:s}),t(e))})})}).then(function(e){return new l.a(function(t,n){e.web3().eth.getBalance(e.coinbase,function(a,s){a?n(new Error("Unable to retrieve balance for address: "+e.coinbase)):(e=k()({},e,{balance:s}),t(e))})})}),T=function(e){var t=window.web3;t=new C.a(t.currentProvider),setInterval(function(){if(t&&W.state.web3.web3Instance)if(t.eth.coinbase!==W.state.web3.coinbase){var e=t.eth.coinbase;t.eth.getBalance(t.eth.coinbase,function(t,n){t?console.log(t):W.dispatch("pollWeb3",{coinbase:e,balance:parseInt(n,10)})})}else t.eth.getBalance(W.state.web3.coinbase,function(e,t){e?console.log(e):parseInt(t,10)!==W.state.web3.balance&&W.dispatch("pollWeb3",{coinbase:W.state.web3.coinbase,balance:t})})},500)},E=new l.a(function(e,t){var n=new C.a(window.web3.currentProvider).eth.contract(m),a=n.at("0x4A8Ecd73515c7D475f67977c9bC8f0afc6cEB1E1");console.log(n),console.log(a),e(a)});a.default.use(u.a);var W=new u.a.Store({strict:!0,state:h,mutations:{registerWeb3Instance:function(e,t){console.log("registerWeb3instance Mutation being executed",t);var n=t,a=e.web3;a.coinbase=n.coinbase,a.networkId=n.networkId,a.balance=parseInt(n.balance,10),a.isInjected=n.injectedWeb3,a.web3Instance=n.web3,e.web3=a,T(),fetch("https://api.etherscan.io/api?module=account&action=txlist&address="+e.web3.coinbase+"&startblock=0&endblock=99999999&sort=asc&apikey=IH2ECRV4W8F6N2ZCX3M1DDUJZYGJ5BT88Y").then(function(e){return e.json()}).then(function(t){t.result.forEach(function(e){e.value=web3.fromWei(e.value,"ether")}),e.web3.latestTransactions=t.result})},pollWeb3Instance:function(e,t){console.log("pollWeb3Instance mutation being executed",t),e.web3.isCheckingTransaction=!1,e.web3.coinbase=t.coinbase,e.web3.balance=parseInt(t.balance,10)},registerContractInstance:function(e,t){console.log("Casino contract instance: ",t),e.contractInstance=function(){return t}}},actions:{registerWeb3:function(e){var t=e.commit;console.log("registerWeb3 Action being executed"),I.then(function(e){console.log("committing result to registerWeb3Instance mutation"),t("registerWeb3Instance",e)}).catch(function(e){console.log("error in action registerWeb3",e)})},pollWeb3:function(e,t){var n=e.commit;console.log("pollWeb3 action being executed"),n("pollWeb3Instance",t)},getContractInstance:function(e){var t=e.commit;E.then(function(e){t("registerContractInstance",e)}).catch(function(e){return console.log(e)})}}}),B=n("3EgV"),F=n.n(B),A=(n("7zck"),n("Ui3i"));a.default.use(F.a);var D=new F.a({theme:{options:{customProperties:!0},dark:!0,themes:{dark:{primary:"#1262FF",secondary:"#111a24",error:"#FF576B",success:"#00D46A",background:"#050e18",navbar:"#111a24",backgroundHeader:"#0e151d",backgroundBody:"#111a24",selectBackground:"#0a0f14",emdxBlue:"#1262FF",borderColor:"#202834",test:"#E33C50",adminButton:"#1d252f",backgroundOverlay:"#07121E",primaryBack:"#121A24",secondaryBack:"#0E151D",lightBack:"#162230",primaryColor:"#ffffff",secondaryColor:"#888C91",lightColor:"#293039"},light:{primary:"#1262FF",secondary:A.a.grey.darken1,accent:A.a.shades.black,error:"#EF5C6D",success:"#49BF78",background:"#ECEFF0",emdxBlue:"#1262FF",primaryBack:"#ffffff",secondaryBack:"#F5F5F5",lightBack:"#F5F5F5",primaryColor:"#050E18",secondaryColor:"#82878C",lightColor:"#293039"}}}});a.default.config.productionTip=!1,new a.default({el:"#app",router:g,vuetify:D,store:W,components:{App:o},template:"<App/>"})},"R/pS":function(e,t){e.exports=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"name",outputs:[{name:"o_name",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"subRegistrar",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_registrar",type:"address"}],name:"setSubRegistrar",outputs:[],type:"function"},{constant:!1,inputs:[],name:"Registrar",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"},{name:"_primary",type:"bool"}],name:"setAddress",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_content",type:"bytes32"}],name:"setContent",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"disown",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_winner",type:"address"}],name:"AuctionEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_bidder",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"NewBid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"},{indexed:!0,name:"addr",type:"address"}],name:"PrimaryChanged",type:"event"}]},UIsv:function(e,t){e.exports=[{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_refund",type:"address"}],name:"disown",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"}],name:"setAddr",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"}]},hvTE:function(e,t){},oPsS:function(e,t){e.exports=[{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"indirectId",type:"bytes32"},{name:"value",type:"uint256"}],name:"icapTransfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"to",type:"bytes32"}],name:"deposit",outputs:[],payable:!0,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"AnonymousDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"indirectId",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"IcapTransfer",type:"event"}]}},["NHnr"]);
//# sourceMappingURL=app.c078377d0dfe4dc9ad27.js.map